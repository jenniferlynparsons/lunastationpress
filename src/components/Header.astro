---
import NavLink from "./NavLink.astro";

const { showHero = false } = Astro.props;
---

<!-- Header with conditional hero content -->
<header class={`relative ${showHero ? "min-h-screen bg-cover bg-center bg-no-repeat" : ""}`} style={showHero ? "background-image: url('/images/bg_13_big.jpg');" : ""} role="banner">
  <!-- Light overlay for better text contrast while preserving background -->
  {showHero && <div class="absolute inset-0 bg-black bg-opacity-20" />}

  <div class="relative z-10">
    <!-- Top Navigation Bar -->
    <nav class="w-full bg-black" role="navigation" aria-label="Main navigation">
      <div class="container mx-auto px-4 py-6">
        <div class="flex items-center justify-between">
          <!-- Logo/Brand -->
          <a href="/" class="flex items-center space-x-3 text-white">
            <!-- Decorative symbol (using a simple star for now, can be replaced with custom icon) -->
            <img src="/images/logo.png" alt="Luna Station Press" class="h-8 md:h-10" loading="eager" decoding="async" />
          </a>

          <!-- Desktop Navigation -->
          <ul class="hidden lg:flex items-center space-x-8 text-sm font-medium tracking-wider uppercase">
            <li><NavLink href="/">Home</NavLink></li>
            <li><NavLink href="/catalog">Catalog</NavLink></li>
            <li><NavLink href="/chacruna">Chacruna</NavLink></li>
            <li><NavLink href="/quarterly">Quarterly</NavLink></li>
            <li><NavLink href="/blog">Blog</NavLink></li>
            <li><NavLink href="/about">About</NavLink></li>
            <li><NavLink href="/contact">Contact</NavLink></li>
          </ul>

          <!-- Mobile Menu -->
          <div class="flex items-center space-x-4">
            <!-- Mobile menu button -->
            <button id="mobile-menu-button" class="lg:hidden p-2 text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="mobile-menu">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="hidden lg:hidden mt-6 bg-black bg-opacity-80 rounded-lg p-6">
          <ul class="space-y-4 text-center text-sm uppercase tracking-wider">
            <li><NavLink href="/" class="block py-3">Home</NavLink></li>
            <li><NavLink href="/catalog" class="block py-3">Catalog</NavLink></li>
            <li><NavLink href="/chacruna" class="block py-3">Chacruna</NavLink></li>
            <li><NavLink href="/quarterly" class="block py-3">Quarterly</NavLink></li>
            <li><NavLink href="/blog" class="block py-3">Blog</NavLink></li>
            <li><NavLink href="/about" class="block py-3">About</NavLink></li>
            <li><NavLink href="/contact" class="block py-3">Contact</NavLink></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero Content - Only shown when showHero is true -->
    {
      showHero && (
        <div class="container mx-auto px-4 pt-32 pb-40 text-center text-white">
          <div class="max-w-5xl mx-auto">
            <h2 class="text-xl md:text-2xl font-light tracking-[0.3em] uppercase mb-12 text-white opacity-90 [text-wrap:balance]">Welcome to</h2>
            <h1 class="text-5xl md:text-7xl lg:text-8xl font-light tracking-[0.15em] uppercase mb-16 leading-tight text-white [text-wrap:balance]">Luna Station Press</h1>
            <p class="text-xl md:text-2xl font-light tracking-[0.1em] opacity-90 max-w-3xl mx-auto leading-relaxed [text-wrap:balance] [orphans:2] [widows:2]">Small but mighty. A passion for stories. Fiercely independent.</p>
          </div>
        </div>
      )
    }
  </div>
</header>

<script>
  // Mobile menu toggle functionality
  document.addEventListener("DOMContentLoaded", function () {
    const menuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");

    // Mobile menu toggle
    if (menuButton && mobileMenu) {
      menuButton.addEventListener("click", function () {
        const isExpanded = menuButton.getAttribute("aria-expanded") === "true";

        if (isExpanded) {
          mobileMenu.classList.add("hidden");
          menuButton.setAttribute("aria-expanded", "false");
        } else {
          mobileMenu.classList.remove("hidden");
          menuButton.setAttribute("aria-expanded", "true");
        }
      });
    }
  });
</script>
