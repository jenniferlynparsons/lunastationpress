---
import type { CollectionEntry } from "astro:content";
import BaseHead from "@components/BaseHead.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import FormattedDate from "@components/FormattedDate.astro";
import BlogSidebar from "@components/BlogSidebar.astro";
import { SITE_TITLE } from "@/consts";

type Props = CollectionEntry<"blog">["data"];

const { title, pubDate, author } = Astro.props;

const pageTitle = `${title} | ${SITE_TITLE}`;
const pageDescription = `Blog post: ${title}`;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={pageTitle} description={pageDescription} />
  </head>
  <body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">
    <Header />

    <main>
      <section class="py-16">
        <div class="container mx-auto px-4 max-w-7xl">
          <div class="flex flex-col lg:flex-row gap-8">
            <!-- Main Content -->
            <article class="flex-1 lg:w-2/3">
              <header class="mb-8">
                <h1 class="text-3xl md:text-4xl font-light text-gray-800 dark:text-gray-100 mb-4">{title}</h1>
                <div class="text-sm text-gray-500 dark:text-gray-400 mb-6">
                  By {author} / <FormattedDate date={pubDate} />
                </div>
              </header>

              <div class="prose prose-lg max-w-none text-gray-700 dark:text-gray-300 leading-relaxed">
                <slot />
              </div>
            </article>

            <!-- Sidebar -->
            <BlogSidebar />
          </div>
        </div>
      </section>
    </main>

    <Footer />
  </body>
</html>
